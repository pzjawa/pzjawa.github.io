---
title: Vercel部署Umami为你的网站添加统计
tags:
  - 博客
  - Umami
  - Vercel
categories:
  - 技术
abbrlink: f988
date: 2024-08-19 16:05:51
cover: https://image.ifeng.asia:5243/files/2/66c700bf9d607.webp
description:
keywords: 'Vercel,Vmami,Blog,网站,博客,统计,监控'
---

## Vercel部署

在[Vercel](https://vercel.com/)的`Storage`创建一个`Postgres`，名称随意，创建完成后记录下`POSTGRES_PRISMA_URL`的值

![](https://image.ifeng.asia:5243/files/2/66c700bfad160.webp)

将[Umami](https://github.com/umami-software/umami)fork到你的[Github](https://github.com/)账户中，并在[Vercel](https://vercel.com/)中导入

![](https://image.ifeng.asia:5243/files/2/66c700bfcedd5.webp)

添加`DATABASE_URL`和`TRACKER_SCRIPT_NAME`到`Environment variables`中

- `DATABASE_URL`：`POSTGRES_PRISMA_URL`的值，格式为postgres://default:xxxxxx
- `TRACKER_SCRIPT_NAME`：自定义脚本名称，可防止被部分广告过滤器屏蔽，为除`script`，`umami`和`track`以外的任意值

配置完成后即可点击部署

## 过滤内部访问流量

为了获得更真实的统计数据，我们可以选择过滤掉自身访问时产生的流量

在`Environment variables`中添加以下值：

`IGNORE_IP`：公网IP地址

`IGNORE_HOSTNAME`：本地IP地址

## Umami配置

访问**Vercel**分配给我们的域名或绑定自己的域名进入**Umami**

- `默认用户`：**admin**
- `默认密码`：**umami**

为了避免不必要的问题，建议将默认用户和密码改成自己的

在`设置`-`网站`中添加需要统计的网站，即可在首页看到统计数据

